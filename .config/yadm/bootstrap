#/bin/bash

echo "Updating system"
sudo zypper ref && sudo zypper dup

echo "Installing Core Dev Tools"
sudo zypper install -t pattern devel_basis
sudo zypper in \
    ripgrep \
    ripgrep-bash-completion \
    bat \
    neovim \
    python3-neovim \
    nodejs-default \
    npm \
    yarn \
    exa \
    ruby \
    python \
    python3 \
    git \
    hub \
    tig \
    tmux

if ! command -v fzf &> /dev/null; then
    echo "Installing fzf"
    git clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf
    ~/.fzf/install --all
fi

if [ ! -d ~/.tmux/plugins/tpm ]; then
    echo "Installing tmux plugin manager (tpm)"
    git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm
fi

if ! command -v fff &> /dev/null; then
    echo "Installing fast file finder (fff)"
    git clone https://github.com/dylanaraps/fff ~/.fff
    sudo make -C ~/.fff install
fi

if [ ! -f ~/.bash_completion.d/complete_alias ]; then
    echo "Installing complete-alias"
    mkdir ~/.bash_completion.d
    curl https://raw.githubusercontent.com/cykerway/complete-alias/master/complete_alias > ~/.bash_completion.d/complete_alias
fi

if ! npm list --depth 1 --global neovim > /dev/null 2>&1; then
    echo "Installing neovim npm remote plugin"
    sudo npm install -g neovim
fi
